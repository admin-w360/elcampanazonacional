import{c as T,u as I,d as V,e as w,r as S,a as t,j as e,s as L,k as M,l as j}from"./index.83c5b186.js";import{u as _}from"./pageHook.949dc9fe.js";import{c as B,d as o,u as G,A as D,I as n,B as O,o as $}from"./InputText.0c92fe19.js";import{S as k}from"./Spinner.2d883bb2.js";const z=B().shape({name:o().required("El campo nombre y apellidos es requerido").typeError("El campo nombre y apellidos es requerido"),email:o().email("Email invalido").required("El campo email es requerido").typeError("El campo email es requerido"),address:o().required("El campo direccion es requerido").typeError("El campo direccion es requerido"),phone:o().matches(/^([8]{0,1}[0-9]{0,9})$/,{message:"Celular invalido",excludeEmptyString:!1}).required("El campo celular es requerido").typeError("El campo celular es requerido")});function F(a=[]){return T.post("register",a)}const W=()=>{var p,h,v,f,E,N,x,y;_("Registro de Usuario");const a=I(u=>u.user),m=V(),d=w(),[b,l]=S.exports.useState(!1),[g,c]=S.exports.useState("");((p=a==null?void 0:a.user)==null?void 0:p.email)!==""&&((h=a==null?void 0:a.user)==null?void 0:h.email)!==void 0&&d("/site",{replace:!0}),((v=a==null?void 0:a.user)==null?void 0:v.document)===""&&((f=a==null?void 0:a.user)==null?void 0:f.document)===void 0&&d("/",{replace:!0});const{control:s,handleSubmit:R,formState:{errors:i}}=G({resolver:$(z)});return t("div",{className:"box-login-form borderLine shadow px-3 mt-4 m-lg-0",children:[e("nav",{children:e("div",{className:"nav nav-tabs border-0 ",id:"nav-tab",role:"tablist",children:e("button",{className:"ms-lg-5 btnLogin",id:"nav-registro-tab","data-bs-toggle":"tab","data-bs-target":"#nav-registro",type:"button",role:"tab","aria-controls":"nav-registro","aria-selected":"true",children:"Registrarme"})})}),e("div",{className:"tab-content",id:"nav-tabContent",children:t("div",{className:"tab-pane fade show active pt-4 p-4  p-lg-5",id:"nav-registro",role:"tabpanel","aria-labelledby":"nav-registro-tab",children:[t("h2",{className:"pcampa my-2 my-sm-5 my-lg-4",children:["INGRESA TUS DATOS",e("br",{}),"ACTIVA TU CUP\xD3N",e("br",{}),"DE DESCUENTO."]}),t("form",{onSubmit:R(async u=>{const q={...a.user,...u};l(!0),F(q).then(function(r){var A,C;r!=null&&r.error?(c(r==null?void 0:r.error),l(!1)):(l(!1),m(L(q)),m(M((A=r==null?void 0:r.results)==null?void 0:A.coupon_code)),m(j((C=r==null?void 0:r.results)==null?void 0:C.coupon_expire_at)),d("/site",{replace:!0}))}).catch(function(r){c(r.message()),l(!1)})}),children:[t("div",{className:"form-group mb-4 mt-4 mt-lg-5",children:[t(D,{show:g!=="",variant:"warning",onClose:()=>c(""),dismissible:!0,children:[e(D.Heading,{children:"Error: "}),e("p",{children:g})]}),e(n,{control:s,name:"name",errorMessage:(E=i==null?void 0:i.name)==null?void 0:E.message,label:"* Nombre y Apellidos",placeholder:"Aqu\xED nombre y apellidos",defaultValue:""})]}),e("div",{className:"form-group mb-4",children:e(n,{control:s,name:"address",errorMessage:(N=i==null?void 0:i.address)==null?void 0:N.message,label:"* Direccion",placeholder:"Aqu\xED tu direccion",defaultValue:""})}),e("div",{className:"form-group mb-4",children:e(n,{control:s,name:"phone",errorMessage:(x=i==null?void 0:i.phone)==null?void 0:x.message,label:"* Numero Celular",placeholder:"Aqu\xED tu numero celular",defaultValue:""})}),e("div",{className:"form-group mb-4",children:e(n,{control:s,name:"email",errorMessage:(y=i==null?void 0:i.email)==null?void 0:y.message,label:"* Correo",placeholder:"Aqu\xED tu numero celular",defaultValue:""})}),t("small",{className:"text-white py-2 text-center",children:["Los campos marcados con una ",e("span",{children:"*"})," son obligatorios"]}),e("div",{className:"my-3",children:t(O,{className:"btn btn-primary px-5 pb-3 pcampa rounded-pill",type:"submit",disabled:b,children:[b&&e(k,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1"}),"INGRESAR"]})})]})]})})]})};export{W as default};
