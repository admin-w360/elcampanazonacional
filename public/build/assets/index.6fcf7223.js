import{j as e,a as n,c as C,L as F,u as A,d as E,e as I,r as _,s as T}from"./index.25e093b4.js";import{u as L}from"./pageHook.57763da8.js";import{C as S,F as y,a as D,b as x,c as k,d as h,e as w,u as R,A as N,I as q,B as U,o as V}from"./InputText.ed88e63e.js";import{F as B,a as j,R as G}from"./index.069f1cd9.js";import{S as P}from"./Spinner.9aeb3a64.js";const O=({name:t,control:s,defaultValue:m,rules:l,errorMessage:r,label:o,options:c})=>e(S,{name:t,control:s,defaultValue:m,rules:l,render:({field:d})=>n(y,{"aria-invalid":!!r,children:[e(D,{className:"mb-1",htmlFor:"outlined-adornment-"+t,children:o}),e(B,{id:"outlined-adornment-"+t,...d,placeholder:o,name:t,className:"rounded-pill",isInvalid:!!r,children:c.map((i,p)=>e("option",{value:i.value,children:i.label},p))}),r&&e(x.Feedback,{type:"invalid",id:"standard-weight-helper-text-"+t,children:r})]})}),$=k().shape({document_type:h().required("Tipo documento es requerido").typeError("Tipo documento invalido"),document:h().required("Documeneto de identidad es requerido").typeError("Documeneto invalido"),accept_term:w(),recaptcha_response:h().required("Recargar la pagina e intente ingresar nuevamente")});function z(t=[]){return C.post("start-session",t)}const H=({name:t,route:s="#",type:m="checkbox",required:l=!1,control:r,defaultValue:o,label:c,errorMessage:d})=>e(S,{name:t,control:r,defaultValue:o,render:({field:i,fieldState:p})=>n(y,{"aria-invalid":!!d,children:[e(j,{type:m,name:t,label:e("div",{className:"px-3",children:n(F,{to:s,children:[l?e("span",{children:"*"}):""," ",c]})}),onChange:i.onChange,onBlur:i.onBlur,value:i.value,className:"d-flex align-items-center "+(p.error?"is-invalid":"")}),d&&e(x.Feedback,{type:"invalid",id:"standard-weight-helper-text-"+t,children:d})]})}),Y=()=>{var b,v;L("Inicio de Sesion"),A(u=>u.app);const t=E(),s=I(),[m,l]=_.exports.useState(!1),[r,o]=_.exports.useState(""),{control:c,handleSubmit:d,formState:{errors:i}}=R({resolver:V($)});return n("div",{className:"box-login-form borderLine shadow px-3 mt-4 m-lg-0",children:[e("nav",{children:e("div",{className:"nav nav-tabs border-0 ",id:"nav-tab",role:"tablist",children:e("button",{className:"btnLogin",id:"nav-login-tab","data-bs-toggle":"tab","data-bs-target":"#nav-login",type:"button",role:"tab","aria-controls":"nav-login","aria-selected":"true",children:"Iniciar sesi\xF3n"})})}),e("div",{className:"tab-content",id:"nav-tabContent",children:n("div",{className:"tab-pane fade show active pt-4 p-4  p-lg-5",id:"nav-login",role:"tabpanel","aria-labelledby":"nav-login-tab",children:[n("h2",{className:"pcampa my-2 my-lg-4 my-sm-5",children:["INGRESA TUS DATOS",e("br",{}),"ACTIVA TU CUP\xD3N",e("br",{}),"DE DESCUENTO."]}),n("form",{onSubmit:d(async u=>{l(!0),z({document:u.document,document_type:u.document_type,recaptcha_response:u.recaptcha_response,accept_term:u.accept_term}).then(function(a){var g,f;a!=null&&a.error?(o(a==null?void 0:a.error),l(!1)):(l(!1),t(T({...a==null?void 0:a.results})),((g=a==null?void 0:a.results)==null?void 0:g.email)==""||((f=a==null?void 0:a.results)==null?void 0:f.email)==null?s("/register"):s("/site",{replace:!0}))}).catch(function(a){o(a.message()),l(!1)})}),children:[e("div",{className:"boxLogin mb-4"}),n("div",{className:"form-group mb-5",children:[n(N,{show:r!=="",variant:"warning",onClose:()=>o(""),dismissible:!0,children:[e(N.Heading,{children:"Error: "}),e("p",{children:r})]}),e(G,{control:c,name:"recaptcha_response"}),e(O,{control:c,name:"document_type",label:"* Tipo de documento",defaultValue:"",options:[{label:"Seleccionar documento",value:""},{label:"Cedula de Ciudadania",value:"CC"},{label:"Pasaporte",value:"PA"}],errorMessage:(b=i==null?void 0:i.document_type)==null?void 0:b.message})]}),e("div",{className:"form-group mb-3",children:e(q,{control:c,name:"document",errorMessage:(v=i==null?void 0:i.document)==null?void 0:v.message,label:"* Numero de Documento",placeholder:"___._______._",mask:"999-9999999-9",defaultValue:""})}),e("div",{className:"form-group my-5",children:e(H,{control:c,name:"accept_term",type:"radio",label:"Acepto t\xE9rminos y condiciones",route:"/sites/terms",defaultValue:!1})}),e("div",{className:"my-4",children:n(U,{className:"btn btn-primary px-5 pb-3 pcampa rounded-pill",type:"submit",disabled:m,children:[m&&e(P,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1"}),"INGRESAR"]})})]})]})})]})};export{Y as default};
