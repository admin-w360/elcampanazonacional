import{l as g,c as U,u as k,r as x,j as o,a as c,b as C,L as M}from"./index.07c8e413.js";import{u as q}from"./pageHook.09c469ae.js";import{c as O,d as S,u as T,o as B,A,I as j}from"./InputText.6b60274b.js";import{B as L}from"./Button.e3d31cd2.js";const F=O().shape({email:S().email("Email invalido").required("El campo email es requerido").typeError("El campo email es requerido"),phone:S().matches(/^([8]{0,1}[0-9]{0,9})$/,{message:"Celular invalido",excludeEmptyString:!1}).required("El campo email es requerido").typeError("El campo email es requerido")});var R={exports:{}};(function(p,E){(function(h,d){d()})(g,function(){function h(e,a){return typeof a>"u"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function d(e,a,l){var t=new XMLHttpRequest;t.open("GET",e),t.responseType="blob",t.onload=function(){s(t.response,a,l)},t.onerror=function(){console.error("could not download file")},t.send()}function v(e){var a=new XMLHttpRequest;a.open("HEAD",e,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function u(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof g=="object"&&g.global===g?g:void 0,N=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!N?function(e,a,l){var t=i.URL||i.webkitURL,r=document.createElement("a");a=a||e.name||"download",r.download=a,r.rel="noopener",typeof e=="string"?(r.href=e,r.origin===location.origin?u(r):v(r.href)?d(e,a,l):u(r,r.target="_blank")):(r.href=t.createObjectURL(e),setTimeout(function(){t.revokeObjectURL(r.href)},4e4),setTimeout(function(){u(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,l){if(a=a||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(h(e,l),a);else if(v(e))d(e,a,l);else{var t=document.createElement("a");t.href=e,t.target="_blank",setTimeout(function(){u(t)})}}:function(e,a,l,t){if(t=t||open("","_blank"),t&&(t.document.title=t.document.body.innerText="downloading..."),typeof e=="string")return d(e,a,l);var r=e.type==="application/octet-stream",y=/constructor/i.test(i.HTMLElement)||i.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||r&&y||N)&&typeof FileReader<"u"){var n=new FileReader;n.onloadend=function(){var m=n.result;m=b?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),t?t.location.href=m:location=m,t=null},n.readAsDataURL(e)}else{var w=i.URL||i.webkitURL,f=w.createObjectURL(e);t?t.location=f:location.href=f,t=null,setTimeout(function(){w.revokeObjectURL(f)},4e4)}});i.saveAs=s.saveAs=s,p.exports=s})})(R);function D(p=[]){return U.get("download",{responseType:"blob"})}const H=({isShow:p=!1,onClose:E})=>{var y,b;q("Reenviar Codigo");const h=k(n=>n.user),[d,v]=x.exports.useState(!1),[u,i]=x.exports.useState(""),[N,s]=x.exports.useState(!1),{control:e,handleSubmit:a,formState:{errors:l}}=T({resolver:B(F)}),t=async n=>{h.user.email==n.email&&h.user.phone==n.phone?v(!0):i("Los datos ingresados no coinciden")},r=async()=>{s(!0),D().then(function(n){var f,m;if((f=n==null?void 0:n.data)!=null&&f.error)i((m=n==null?void 0:n.data)==null?void 0:m.message),s(!1);else{console.log(n.type);var w=new Blob([n],{type:"application/pdf"});R.exports.saveAs(w,"coupon.pdf"),s(!1),n instanceof File?console.log("IS un BLOB"):console.log(n==null?void 0:n.data)}}).catch(function(n){i(n==null?void 0:n.message),s(!1)})};return o("div",{className:"modal fade "+(p?"show":""),id:"bonoModal","aria-labelledby":"bonoModalLabel","aria-hidden":"true",children:o("div",{className:"modal-dialog",children:c("div",{className:"modal-content",children:[c(A,{show:u!=="",variant:"warning",onClose:()=>i(""),dismissible:!0,children:[o(A.Heading,{children:"Error: "}),o("p",{children:u})]}),!d&&o("div",{className:"modal-body bgLogin",children:c("form",{onSubmit:a(t),className:"w-100 ",children:[o("img",{src:C+"assets/img/bg-mobile.png",className:"d-block d-lg-none img-fluid mb-5",alt:"bacground mobile"}),o("p",{className:"my-4 text-center",children:o("em",{children:"Ingresa el correo y el numero celular registrado previamente."})}),o("div",{className:"form-group p-3",children:o(j,{control:e,name:"phone",errorMessage:(y=l==null?void 0:l.phone)==null?void 0:y.message,label:"* Numero Celular",placeholder:"Aqu\xED tu numero celular",defaultValue:""})}),o("div",{className:"form-group  mb-3 p-3",children:o(j,{control:e,type:"email",name:"email",errorMessage:(b=l==null?void 0:l.email)==null?void 0:b.message,label:"* Correo",placeholder:"Aqu\xED tu Correo",defaultValue:""})}),o("div",{className:"text-center",children:o(L,{type:"submit",className:"btn btn-primary px-5 pb-3 pcampa rounded-pill",children:"Validar"})})]})}),d&&o("div",{className:"modal-body bgLogin",children:o("div",{className:"text-center py-5 my-5",children:o(L,{onClick:()=>r(),className:"btn btn-primary px-5 pb-3 my-5 pcampa rounded-pill",children:"Descargar Cupon"})})})]})})})},G=()=>{q("Home");const[p,E]=x.exports.useState(!1);return c("div",{className:"container",children:[o(H,{isShow:p}),c("div",{className:"row my-5",children:[o("div",{className:"col-lg-7 text-center d-flex align-items-center ",children:c("div",{className:"box-home p-3 p-sm-0",children:[o("img",{src:C+"assets/img/yaganaste.png",className:"d-block mx-auto img-fluid",alt:"yaganaste"}),c("p",{className:"tInt",children:["Al correo que registraste hemos enviado un cup\xF3n que deber\xE1s descargar y presentar en cualquier tienda de ",o("span",{children:"Nacional"})," para descrubir tu descuento sorpresa"]}),o("p",{className:"footLogin",children:"Nota: Solo podr\xE1s redimir un bono de decuento semanal (Lun a Dom)"})]})}),o("div",{className:"my-5 mb-5 col-lg-5 d-flex align-items-center mt-sm-5 mt-lg-0 ",children:c("div",{className:"w-100 text-center",children:[c("p",{className:"tInt text-white",children:["Si no te lleg\xF3 el ",o("br",{}),"bono al correo haz"]}),o("div",{className:"text-center my-2 my-lg-5",children:o(L,{onClick:()=>E(!0),className:"btn btn-primary px-5 pb-3 pcampa rounded-pill","data-bs-toggle":"modal","data-bs-target":"#bonoModal",children:"Clic aqu\xED"})}),o(M,{to:"terms",className:"footLogin",children:"Aplican t\xE9rminos y condiciones"})]})})]})]})};export{G as default};
