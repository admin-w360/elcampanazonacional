import{c as R,u as T,d as I,e as V,r as C,a as l,j as e,s as w,o as L,p as M}from"./index.07c8e413.js";import{u as j}from"./pageHook.09c469ae.js";import{c as _,d as o,u as G,A as D,I as n,o as O}from"./InputText.6b60274b.js";const $=_().shape({name:o().required("El campo nombre y apellidos es requerido").typeError("El campo nombre y apellidos es requerido"),email:o().email("Email invalido").required("El campo email es requerido").typeError("El campo email es requerido"),address:o().required("El campo direccion es requerido").typeError("El campo direccion es requerido"),phone:o().matches(/^([8]{0,1}[0-9]{0,9})$/,{message:"Celular invalido",excludeEmptyString:!1}).required("El campo celular es requerido").typeError("El campo celular es requerido")});function F(a=[]){return R.post("register",a)}const J=()=>{var g,p,h,v,f,E,x,N;j("Registro de Usuario");const a=T(u=>u.user),c=I(),d=V(),[H,i]=C.exports.useState(!1),[b,m]=C.exports.useState("");((g=a==null?void 0:a.user)==null?void 0:g.email)!==""&&((p=a==null?void 0:a.user)==null?void 0:p.email)!==void 0&&d("/site",{replace:!0}),((h=a==null?void 0:a.user)==null?void 0:h.document)===""&&((v=a==null?void 0:a.user)==null?void 0:v.document)===void 0&&d("/",{replace:!0});const{control:s,handleSubmit:S,formState:{errors:t}}=G({resolver:O($)});return l("div",{className:"box-login-form borderLine shadow px-3 mt-4 m-lg-0",children:[e("nav",{children:e("div",{className:"nav nav-tabs border-0 ",id:"nav-tab",role:"tablist",children:e("button",{className:"ms-lg-5 btnLogin",id:"nav-registro-tab","data-bs-toggle":"tab","data-bs-target":"#nav-registro",type:"button",role:"tab","aria-controls":"nav-registro","aria-selected":"true",children:"Registrarme"})})}),e("div",{className:"tab-content",id:"nav-tabContent",children:l("div",{className:"tab-pane fade show active pt-4 p-4  p-lg-5",id:"nav-registro",role:"tabpanel","aria-labelledby":"nav-registro-tab",children:[l("h2",{className:"pcampa my-2 my-sm-5 my-lg-4",children:["INGRESA TUS DATOS",e("br",{}),"ACTIVA TU CUP\xD3N",e("br",{}),"DE DESCUENTO."]}),l("form",{onSubmit:S(async u=>{const y={...a.user,...u};i(!0),F(y).then(function(r){var q,A;r!=null&&r.error?(m(r==null?void 0:r.error),i(!1)):(i(!1),c(w(y)),c(L((q=r==null?void 0:r.results)==null?void 0:q.coupon_code)),c(M((A=r==null?void 0:r.results)==null?void 0:A.coupon_expire_at)),d("/site",{replace:!0}))}).catch(function(r){m(r.message()),i(!1)})}),children:[l("div",{className:"form-group mb-4 mt-4 mt-lg-5",children:[l(D,{show:b!=="",variant:"warning",onClose:()=>m(""),dismissible:!0,children:[e(D.Heading,{children:"Error: "}),e("p",{children:b})]}),e(n,{control:s,name:"name",errorMessage:(f=t==null?void 0:t.name)==null?void 0:f.message,label:"* Nombre y Apellidos",placeholder:"Aqu\xED nombre y apellidos",defaultValue:""})]}),e("div",{className:"form-group mb-4",children:e(n,{control:s,name:"address",errorMessage:(E=t==null?void 0:t.address)==null?void 0:E.message,label:"* Direccion",placeholder:"Aqu\xED tu direccion",defaultValue:""})}),e("div",{className:"form-group mb-4",children:e(n,{control:s,name:"phone",errorMessage:(x=t==null?void 0:t.phone)==null?void 0:x.message,label:"* Numero Celular",placeholder:"Aqu\xED tu numero celular",defaultValue:""})}),e("div",{className:"form-group mb-4",children:e(n,{control:s,name:"email",errorMessage:(N=t==null?void 0:t.email)==null?void 0:N.message,label:"* Correo",placeholder:"Aqu\xED tu numero celular",defaultValue:""})}),l("small",{className:"text-white py-2 text-center",children:["Los campos marcados con una ",e("span",{children:"*"})," son obligatorios"]}),e("div",{className:"my-3",children:e("button",{type:"submit",className:"btn btn-primary px-5 pb-3 pcampa rounded-pill",children:"INGRESAR"})})]})]})})]})};export{J as default};
