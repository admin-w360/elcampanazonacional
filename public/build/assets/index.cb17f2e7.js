import{c as R,i as T,u as I,d as L,r as C,a as t,j as e,s as V,k as F,l as M}from"./index.3bf6ba1d.js";import{u as j}from"./pageHook.f59f3eaa.js";import{c as _,d as o,u as B,A as D,I as n,B as G,o as O}from"./InputText.90c1007e.js";import{S as $}from"./Spinner.80fa3423.js";const k=_().shape({name:o().required("El campo nombre y apellidos es requerido").typeError("El campo nombre y apellidos es requerido"),email:o().email("Email invalido").required("El campo email es requerido").typeError("El campo email es requerido"),address:o().required("El campo direccion es requerido").typeError("El campo direccion es requerido"),phone:o().matches(/^([8]{0,1}[0-9]{0,9})$/,{message:"Celular invalido",excludeEmptyString:!1}).required("El campo celular es requerido").typeError("El campo celular es requerido")});function z(a=[]){return R.post("register",a)}const U=()=>{var p,h,v,f,E,x,N,y;j("Registro de Usuario"),window.dataLayer.push({event:"pageview",page:{url:"/site/contacts",title:"Registro de Usuario"}});const a=T(u=>u.user),d=I(),c=L(),[b,s]=C.exports.useState(!1),[g,m]=C.exports.useState("");((p=a==null?void 0:a.user)==null?void 0:p.email)!==""&&((h=a==null?void 0:a.user)==null?void 0:h.email)!==void 0&&c("/site",{replace:!0}),((v=a==null?void 0:a.user)==null?void 0:v.document)===""&&((f=a==null?void 0:a.user)==null?void 0:f.document)===void 0&&c("/",{replace:!0});const{control:l,handleSubmit:w,formState:{errors:i}}=B({resolver:O(k)});return t("div",{className:"box-login-form borderLine shadow px-3 mt-4 m-lg-0",children:[e("nav",{children:e("div",{className:"nav nav-tabs border-0 ",id:"nav-tab",role:"tablist",children:e("button",{className:"ms-lg-5 btnLogin",id:"nav-registro-tab","data-bs-toggle":"tab","data-bs-target":"#nav-registro",type:"button",role:"tab","aria-controls":"nav-registro","aria-selected":"true",children:"Registrarme"})})}),e("div",{className:"tab-content",id:"nav-tabContent",children:t("div",{className:"tab-pane fade show active pt-4 p-4  p-lg-5",id:"nav-registro",role:"tabpanel","aria-labelledby":"nav-registro-tab",children:[t("h2",{className:"pcampa my-2 my-sm-5 my-lg-4",children:["INGRESA TUS DATOS",e("br",{}),"ACTIVA TU CUP\xD3N",e("br",{}),"DE DESCUENTO."]}),t("form",{onSubmit:w(async u=>{const q={...a.user,...u};s(!0),z(q).then(function(r){var A,S;r!=null&&r.error?(m(r==null?void 0:r.error),s(!1)):(s(!1),d(V(q)),d(F((A=r==null?void 0:r.results)==null?void 0:A.coupon_code)),d(M((S=r==null?void 0:r.results)==null?void 0:S.coupon_expire_at)),c("/site",{replace:!0}))}).catch(function(r){m(r.message()),s(!1)})}),children:[t("div",{className:"form-group mb-4 mt-4 mt-lg-5",children:[t(D,{show:g!=="",variant:"warning",onClose:()=>m(""),dismissible:!0,children:[e(D.Heading,{children:"Error: "}),e("p",{children:g})]}),e(n,{control:l,name:"name",errorMessage:(E=i==null?void 0:i.name)==null?void 0:E.message,label:"* Nombres y apellidos",placeholder:"Aqu\xED nombres y apellidos",defaultValue:""})]}),e("div",{className:"form-group mb-4",children:e(n,{control:l,name:"address",errorMessage:(x=i==null?void 0:i.address)==null?void 0:x.message,label:"* Direcci\xF3n",placeholder:"Aqu\xED tu direcci\xF3n",defaultValue:""})}),e("div",{className:"form-group mb-4",children:e(n,{control:l,name:"phone",errorMessage:(N=i==null?void 0:i.phone)==null?void 0:N.message,label:"* N\xFAmero celular",placeholder:"Aqu\xED tu n\xFAmero  celular",defaultValue:""})}),e("div",{className:"form-group mb-4",children:e(n,{control:l,name:"email",errorMessage:(y=i==null?void 0:i.email)==null?void 0:y.message,label:"* Correo",placeholder:"Aqu\xED tu correo electronico",defaultValue:""})}),t("small",{className:"text-white py-2 text-center",children:["Los campos marcados con una ",e("span",{children:"*"})," son obligatorios"]}),e("div",{className:"my-3",children:t(G,{className:"btn btn-primary px-5 pb-3 pcampa rounded-pill",type:"submit",disabled:b,children:[b&&e($,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1"}),"INGRESAR"]})})]})]})})]})};export{U as default};
