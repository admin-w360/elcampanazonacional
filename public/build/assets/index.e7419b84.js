import{j as e,a as n,c as E,L as I,u as w,d as L,r as y,s as T}from"./index.d186bbb3.js";import{u as D}from"./pageHook.6a02e29d.js";import{C,F,a as k,b as A,c as R,d as b,e as V,u as q,A as x,I as S,B as U,o as B}from"./InputText.deea459f.js";import{F as P,a as j,R as G}from"./index.28a22e4c.js";import{S as O}from"./Spinner.86f65eea.js";const $=({name:t,control:m,defaultValue:u,rules:o,errorMessage:l,label:c,options:r})=>e(C,{name:t,control:m,defaultValue:u,rules:o,render:({field:s})=>n(F,{"aria-invalid":!!l,children:[e(k,{className:"mb-1",htmlFor:"outlined-adornment-"+t,children:c}),e(P,{id:"outlined-adornment-"+t,...s,placeholder:c,name:t,className:"rounded-pill",isInvalid:!!l,children:r.map((d,i)=>e("option",{value:d.value,children:d.label},i))}),l&&e(A.Feedback,{type:"invalid",id:"standard-weight-helper-text-"+t,children:l})]})}),z=R().shape({document_type:b().required("Tipo documento es requerido").typeError("Tipo documento invalido"),document:b().required("Documeneto de identidad es requerido").typeError("Documeneto invalido"),accept_term:V(),recaptcha_response:b().required("Recargar la pagina e intente ingresar nuevamente")});function H(t=[]){return E.post("start-session",t)}const J=({name:t,route:m="#",type:u="checkbox",required:o=!1,control:l,defaultValue:c,label:r,errorMessage:s})=>e(C,{name:t,control:l,defaultValue:c,render:({field:d,fieldState:i})=>n(F,{"aria-invalid":!!s,children:[e(j,{type:u,name:t,label:e("div",{className:"px-3",children:n(I,{to:m,children:[o?e("span",{children:"*"}):""," ",r]})}),onChange:d.onChange,onBlur:d.onBlur,value:d.value,className:"d-flex align-items-center "+(i.error?"is-invalid":"")}),s&&e(A.Feedback,{type:"invalid",id:"standard-weight-helper-text-"+t,children:s})]})}),M=()=>{var v,g,_;D("Inicio de Sesion"),window.dataLayer.push({event:"pageview",page:{url:"/site/contacts",title:"Inicio de Sesion"}});const t=w(),m=L(),[u,o]=y.exports.useState(!1),[l,c]=y.exports.useState(""),{control:r,handleSubmit:s,watch:d,formState:{errors:i}}=q({resolver:B(z)}),h=d("document_type");return console.log(h),n("div",{className:"box-login-form borderLine shadow px-3 mt-4 m-lg-0",children:[e("nav",{children:e("div",{className:"nav nav-tabs border-0 ",id:"nav-tab",role:"tablist",children:e("button",{className:"btnLogin",id:"nav-login-tab","data-bs-toggle":"tab","data-bs-target":"#nav-login",type:"button",role:"tab","aria-controls":"nav-login","aria-selected":"true",children:"Iniciar sesi\xF3n"})})}),e("div",{className:"tab-content",id:"nav-tabContent",children:n("div",{className:"tab-pane fade show active pt-4 p-4  p-lg-5",id:"nav-login",role:"tabpanel","aria-labelledby":"nav-login-tab",children:[n("h2",{className:"pcampa my-2 my-lg-4 my-sm-5",children:["INGRESA TUS DATOS",e("br",{}),"ACTIVA TU CUP\xD3N",e("br",{}),"DE DESCUENTO."]}),n("form",{onSubmit:s(async p=>{o(!0),H({document:p.document,document_type:p.document_type,recaptcha_response:p.recaptcha_response,accept_term:p.accept_term}).then(function(a){var f,N;a!=null&&a.error?(c(a==null?void 0:a.error),o(!1)):(o(!1),t(T({...a==null?void 0:a.results})),((f=a==null?void 0:a.results)==null?void 0:f.email)==""||((N=a==null?void 0:a.results)==null?void 0:N.email)==null?m("/register"):m("/site",{replace:!0}))}).catch(function(a){c(a.message()),o(!1)})}),children:[e("div",{className:"boxLogin mb-4"}),n("div",{className:"form-group mb-5",children:[n(x,{show:l!=="",variant:"warning",onClose:()=>c(""),dismissible:!0,children:[e(x.Heading,{children:"Error: "}),e("p",{children:l})]}),e(G,{control:r,name:"recaptcha_response"}),e($,{control:r,name:"document_type",label:"* Tipo de documento",defaultValue:"",options:[{label:"Seleccionar",value:""},{label:"Cedula de Ciudadan\xEDa",value:"CC"},{label:"Pasaporte",value:"PA"}],errorMessage:(v=i==null?void 0:i.document_type)==null?void 0:v.message})]}),n("div",{className:"form-group mb-3",children:[h=="PA"&&e(S,{control:r,name:"document",errorMessage:(g=i==null?void 0:i.document)==null?void 0:g.message,label:"* N\xFAmero de pasaporte",placeholder:"______________",mask:"**99999999999",defaultValue:""}),h=="CC"&&e(S,{control:r,name:"document",errorMessage:(_=i==null?void 0:i.document)==null?void 0:_.message,label:"* N\xFAmero de documento",placeholder:"___-_______-_",mask:"999-9999999-9",defaultValue:""})]}),e("div",{className:"form-group my-5",children:e(J,{control:r,name:"accept_term",type:"radio",label:"Acepto t\xE9rminos y condiciones",route:"/sites/terms",defaultValue:!1})}),e("div",{className:"my-4",children:n(U,{className:"btn btn-primary px-5 pb-3 pcampa rounded-pill",type:"submit",disabled:u,children:[u&&e(O,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1"}),"INGRESAR"]})})]})]})})]})};export{M as default};
